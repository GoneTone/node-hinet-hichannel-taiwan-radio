<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>hinet-hichannel-taiwan-radio Demo</title>
</head>
<body>
<p id="token1">Token1：取得中...</p>
<p id="token2">Token2：取得中...</p>
<p id="m3u8Url">m3u8 串流網址：取得中...</p>
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="../dist/HiNetHichannel.bundle.js"></script>
<script>
    $.get("https://api.ipify.org/?format=json", function(response) {
        const hichannel = new HiNetHichannel("hich-ra000040", response.ip); //hich-ra000040 => KISS RADIO 大眾廣播電台

        /* 取得 HiNet hichannel m3u8 串流網址 */
        hichannel.buildPlayUrl().then(m3u8Url => {
            $("#m3u8Url").text(`m3u8 串流網址：${m3u8Url}`);
        }).catch(e => {
            console.error(e);
        });

        /* 取得 HiNet hichannel Token */
        const expire1 = (Math.floor(Date.now() / 1000) + (60 * 5));
        const expire2 = (expire1 + (60 * 60 * 24));

        $("#token1").text(`Token1：${hichannel.getToken(expire1, 1)}`);
        $("#token2").text(`Token2：${hichannel.getToken(expire2, 2)}`);
    });
</script>
</body>
</html>
